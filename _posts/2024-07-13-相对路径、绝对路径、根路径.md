---
layout: post
title: "相对路径、绝对路径、根路径"
subtitle: "相对路径在文件包含情况下会产生一些问题；其他两种路径也各自有优缺点"
date: 2024-07-14 16:12:03
author: "WenXingming"
published: true
catalog: true
# header-img: "{{baseurl}}/img/xxx"
tags: [杂乱记录]
---

## 相对路径

相对路径是相对于当前工作目录的位置描述文件或目录的路径。它**不以根目录符号开头**（一般以 ./ 或 ../ 或 直接以目录、文件开头），根据当前工作目录进行解析。相对路径的特点是**依赖于当前工作目录**，这既是它的优点也是缺点。优点是便于整个项目的打包移植，因为移植项目的过程中，项目中文件的相对位置不会改变。缺点是相对路径依赖于当前工作目录，如果工作目录变化，相对路径可能会失效或指向错误的位置，比如下面的情况。

在Web开发以及其他开发中，使用相对路径可能会导致一些问题，尤其是当多个文件从不同的目录包含同一个文件时。相对路径是相对于当前工作目录的路径，这意味着如果你的文件（比如CSS、JavaScript文件等）**被多个页面从不同的目录级别引用（include），那么相同的相对路径，就可能导致无法正确解析资源路径**，导致资源加载失败。

例如，如果你有一个 style.css 文件，还有一个 head.html 文件，如果你在 head.html 中使用相对路径 ./style.css 来引用 CSS 文件。当位于网站根目录下的 index.html 和位于 /subdirectory/ 下的 page.html 同时引用 head.html 时：在 index.html 中使用相对路径 ./style.css 来引用 CSS 文件，这在 index.html 中是没有问题的，它正确地指向了根目录下的style.css；但是，相同的相对路径在 /subdirectory/page.html 中就会出问题，因为浏览器会尝试在 /subdirectory/ 下查找 style.css，而不是在根目录下。

## 绝对路径

绝对路径**完整地**描述文件或目录位置的路径，总是从顶级目录开始。

- 在 Unix/Linux 系统中，顶级目录用斜杠 / 表示。例如：/home/user/documents/file.txt。
- 在 Windows 系统中，顶级目录是驱动器符号加上冒号和反斜杠。例如：C:\Users\user\Documents\file.txt。
- 在 WWW（万维网）上，绝对路径就是完整的 URL 地址。例如：https:主机地址/images/01.png

绝对路径的特点是唯一确定一个文件或目录的位置。优点是唯一明确。缺点是路径可能会很长，且可能不易于项目的移植。

## 根路径

Web 开发时，经常使用根路径。根路径也是从顶级目录开始，以 / 开头，指向网站根目录下的资源。这种路径类似于绝对路径，但更灵活，因为它依赖于网站的根目录结构。但使用根相对路径在某些情况下也可能会导致问题，特别是当**托管在子目录中**时：如果你的应用程序托管在一个子目录（例如 https://example.com/）而不是根目录（例如 https://example.com/），使用根相对路径可能会导致资源路径错误。这是因为：当你把这个网站部署到根目录下（例如 https://example.com/），这个路径依然有效，因为 / 代表的就是 https://example.com/ 的根目录。然而，如果你的网站是部署在一个子目录下（例如 https://example.com/subdirectory/），根相对路径 /images/logo.png 就会出问题。因为这个路径还是会指向 https://example.com/images/logo.png，而不是 https://example.com/subdirectory/images/logo.png。所以，当你在开发时使用根相对路径 /，部署到子目录时，这个 / 仍然代表根目录，而不是子目录，从而导致资源路径错误。

## 配置基路径

思想就是通过配置一个（环境）**变量**，来动态更改所有路径。一些静态网站生成器，如 Jekyll、Hugo等，允许你配置一个基路径如 baseurl，在开发时都使用 “baseurl+根路径”。这样就可以在实际部署到网站时，根据托管目录的不同，更改 baseurl，以实现资源的正确解析（html 下使用相对路径 + `<base>` 标签指定一个基准URL，就类似这种思想）。总之，这种路径方法，本质上是使用绝对路径，然后通过 baseurl 配置资源的路径为真正的绝对路径。举个例子：如果网站部署在根目录下，那么 baseurl 就可以设置为 "\"（空）；如果网站部署在子目录下如 https://example.com/subdirectory/，那么就可以设置 baseurl 为 "/subdirectory"。

## 小结

在多个页面或组件共享资源的情况下，尤其是当多个文件从不同的目录包含同一个文件时，相比于使用「相对路径」，使用「根路径+baseurl」或「绝对路径」，通常是更安全、更可靠的选择，但它们也会存在缺陷。这三种路径类型在不同的场景下有不同的用途，根据需要具体选择。