---
layout: post
title: "相对路径导致的问题"
subtitle: "相对路径在文件包含情况下会产生一些问题，尽量少使用"
date: 2024-07-13 17:26:42
author: "WenXingming"
published: true
catalog: true
# header-img: "{{baseurl}}/img/xxx"
tags: [杂乱记录]
---

## 相对路径

在Web开发中，**使用相对路径可能会导致一些问题**，尤其是当多个文件从不同的目录包含同一个文件时。相对路径是相对于当前工作目录的路径，这意味着如果你的文件（比如CSS、JavaScript文件或其他资源）**被多个页面从不同的目录级别引用，那么相同的相对路径，就可能导致无法正确解析**，导致资源加载失败。

例如，如果你有一个style.css文件，还有一个head.html文件，如果你在head.html中使用相对路径./style.css来引用CSS文件。当位于网站根目录下的index.html和位于/subdirectory/下的page.html同时引用head.html：在index.html中使用相对路径./style.css来引用CSS文件，这在index.html中是没有问题的，因为它正确地指向了根目录下的style.css；但是，相同的相对路径在/subdirectory/page.html中就会出问题，因为浏览器会尝试在/subdirectory/下查找style.css，而不是在根目录下。

## 根相对路径

为了避免这种问题，可以使用**根相对路径**：根相对路径也是从根目录开始，以 / 开头，指向网站根目录下的资源。这种路径类似于绝对路径，但更灵活，因为它依赖于网站的根目录结构。使用根相对路径在某些情况下也可能会导致问题（似乎必须把网站部署在根目录下...），特别是以下情况，**托管在子目录中**：如果你的应用程序托管在一个子目录（例如 `https://example.com/subdirectory/`）而不是根目录（例如 `https://example.com/`），使用根相对路径可能会导致资源路径错误。

## 绝对路径

为了避免这些问题，可以**使用绝对路径**：绝对路径从域名开始，无论文件位于哪个子目录，都会指向正确的资源位置。但绝对路径过于冗长且不易修改，感觉一般只适用于网络资源。

## 动态路径

**动态生成路径**：如 Jekyll 的 baseurl，根据**环境变量（定义一个变量）**或配置文件来设置路径，动态生成资源路径。（html 下使用相对路径与 `<base>` 标签指定一个基准URL，就类似动态生成路径）

### 小结

在多个页面或组件共享资源的情况下，相比于使用相对路径，**使用根相对路径或绝对路径通常是更安全、更可靠的选择**，但它们也会存在缺陷。感觉**动态生成路径**更好，即为每一个**路径添加一个的环境变量**，通过修改变量，就可以同时修改多个路径。