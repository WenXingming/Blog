---
layout: post
title: "35. 搜索插入位置 - 力扣（LeetCode）"
subtitle: "难度：Easy"
date: 2024-07-09 21:45:00
author: "WenXingming"
published: true
catalog: true
# header-img: "img/post-bg-2015.jpg"
# header-style: text
tags:
  - Leetcode


---

# 题目链接

[35. 搜索插入位置 - 力扣（LeetCode）](https://leetcode.cn/problems/search-insert-position/description/)

# Code 1

使用了STL实现的二分查找：`std::lower_bound()`，详细用法可以询问 AI、查询手册等。

```C++
class Solution {
public:
	int searchInsert(vector<int>& nums, int target) {
		if (nums.empty()) return 0;

		auto it = std::lower_bound(nums.begin(), nums.end(), target);
		return std::distance(nums.begin(), it);
	}
};
```

# Code 2

使用了STL实现的二分查找：`std::upper_bound()`，详细用法可以询问 AI、查询手册等。

```C++
class Solution {
public:
	int searchInsert(vector<int>& nums, int target) {
		if (nums.empty()) return 0;

		auto it = std::upper_bound(nums.begin(), nums.end(), target);

		//排除 it-1 越界的情况。写在这里避免 if-else 的嵌套影响代码风格
		if(it > nums.begin() && *(it-1) == target)
			return std::distance(nums.begin(), it-1);
		else
			return std::distance(nums.begin(), it);
	}
};
```

# Code 3（手搓二分查找）

二分查找实际上并没有想象中的那么简单（代码也可以写：左闭右闭、左开右开等风格，只不过相应的 left、right 的意义，即 left、right 位置的开、闭不一样了，限于篇幅无法细说），后面将会专门讲解二分查找，**务必彻底理解**！

```C++
//手搓二分查找，类似 std::lowwer_bound() 版本
class Solution {
public:
	int searchInsert(vector<int>& nums, int target) {
		if (nums.empty()) return 0;

		int left = 0, right = nums.size(); // [left,right)为搜索区间，注意我选择左闭右开。两个区间：[0,left)、[right,nums.size)
		while (left < right) { // 因为左闭右开，故 left < right 表示区间不空
			int mid = left + (right - left) / 2;
			if (nums[mid] < target) //这里是"<"，故最终两个区间的意义为：[0,left) "<" target，[right,nums.size) >= target。思考如果是"<="呢？是不是就类似 std::upper_bound()了
				left = mid + 1;
			else
				right = mid;
		}
		return right;
	}
};
```

